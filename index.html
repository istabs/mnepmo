<!DOCTYPE HTML>
<html>

<head>
	<title>
		MNE-PMO
	</title>

	<link rel="shortcut icon" type="image/ico" href="favicon.ico">
	<link type="text/css" rel="stylesheet"
		href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link type="text/css" rel="stylesheet" href="styles.css">
	<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css">

</head>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"></script>

<script type="text/javascript" src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>

<script type="text/javascript" src="configuration.js"></script>
<script type="text/javascript" src="uiconfiguration.js"></script>
<script type="text/javascript" src="ggltools.js"></script>

<script type="text/javascript">
	firebase.initializeApp(firebaseConfig);
	var ui = new firebaseui.auth.AuthUI(firebase.auth());
	ui.start('#firebaseui-auth-container', uiConfig)
</script>

<script type="text/javascript">
	// Menu stuff

	function toggle(menuItem) {
		switch (menuItem) {
			case 'login':
				document.getElementById('login').display = "none";
				document.getElementById('logout').display = "block";
				break;
			case 'logout':
				document.getElementById('logout').display = "none";
				document.getElementById('login').display = "block";
				break;
			default:
				break;
		}
	}

	function doLogin() {
		console.log('login');
		toggle('login');
	}

	function doLogout() {
		console.log('logout')
		toggle('logout');
	}
</script>

<script type="text/javascript">

	function initApp_old() {
		firebase.auth().onAuthStateChanged(function (user) {
			document.getElementById('loader').textContent = '';
			if (user) {
				// User is signed in.
				document.getElementById('loginbtn').textContent = uiLabels.logout;
				var displayName = user.displayName;
				var email = user.email;
				var emailVerified = user.emailVerified;
				var photoURL = user.photoURL;
				var uid = user.uid;
				var phoneNumber = user.phoneNumber;
				var providerData = user.providerData;
				user.getIdToken().then(function (accessToken) {
					document.getElementById('email').textContent = email;
					document.getElementById('estado').textContent = emailVerified;
				});
			} else {
				// User is not signed in.
				document.getElementById('loginbtn').textContent = uiLabels.login;
				document.getElementById('email').textContent = '---';
				document.getElementById('estado').textContent = '---';
			}
		}, function (error) {
			console.log(error);
		});
	};

	function gotoGantts() {
		if (loginStatus === true) {
			window.open('/retrieve.html');
			return;
		}
		alert('Please login.');
	}

	function initApp() {
		includeHTML()
		return;
		document.getElementById('loginbtn').addEventListener('click', function () {
			firebase.auth().signOut();
			loginStatus = false;
		});
	}

	var loginStatus = false;

	window.addEventListener('load', initApp);

	$(document).ready(function() {
		$('#menu').load('menu.html');
	});

</script>

<body>
	<div id="menu"></div>

	<div id="firebaseui-auth-container"></div>
	<p>
		<div id="loader">A carregar...</div>
	</p>
	<div id="sign-in"></div>
	<p>Detalhes:</p>
	<ul>
		<li>email: <span id="email"></span></li>
		<li>estado: <span id="estado"></span></li>
	</ul>
	<pre id="account-details"></pre>
	<button onclick="location.href = '/retrieve.html';" autofocus>Continuar</button>
</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
	integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
</script>
<script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
	integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
</script>

</html>